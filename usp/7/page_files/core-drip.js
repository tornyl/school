(function(){let e,t=this,r=t.document;const n=r.currentScript.src;let i=n.substr(0,n.lastIndexOf("/")+1),o=r.body||r.head,a=o.querySelector("iframe#sleeknote");a?e=a.contentWindow:(o.insertAdjacentHTML("beforeend",'<iframe id=sleeknote style="display:none!important" aria-hidden="true"></iframe>'),e=o.lastElementChild.contentWindow,e.promises=[]);let s="";if(!i.includes("local.sleeknote.com")){let S=n.split("/").pop().split(".")[0];s=(S.split("-")[1]||"production")+"/"}let c=new e.URL(t.location),l=new e.URLSearchParams(c.search);if(l.has("snhide"))return;let u=n.split("#")[1]||"SleekNote",d="https://local.sleeknote.com",m=(l.has("snlocal")||e.local)&&!n.includes(d),p=l.get("snbranch");if(m||p){let b=r.createElement("script");return b.charset="utf-8",m?(l.delete("snlocal"),b.src=d,e.local=!0):(l.delete("snbranch"),b.src="https://core-branches.sleeknote.com/branch-"+p),t.history.replaceState(null,null,r.location.origin+r.location.pathname+"?"+l.toString()),b.src+="/frontend2/core.js#"+u,void r.head.appendChild(b)}function f(t){let r=t.campaignName;try{r=e.decodeURI(e.decodeURI(r))}catch(e){}return r}if(!t.sndefine){let k=Object.create(null),y=Object.create(null);function P(t){let n=e.Promise.resolve();return k[t]||(n=new e.Promise(((e,n)=>{if(y[t])y[t].resolve.push(e),y[t].reject.push(n);else{y[t]={resolve:[e],reject:[n]};let o=r.createElement("script");o.src=i+s+(~t.indexOf(".js")?t:t+".js"),o.name=t,o.async=!0,o.charset="utf-8",r.head.appendChild(o),o.onload=function(){y[t].resolve.forEach((e=>{e()}))},o.onerror=function(e){throw y[t].reject.forEach((e=>{e()})),new Error("Error loading: "+e.currentTarget.src)}}}))),n.then((()=>k[t]))}function j(t,r){return e.Promise.all(t.map(P)).then((e=>{r&&r.apply(this,e)}))}function I(...n){var i="string"==typeof n[0]?n.shift():r.currentScript.name,o=Array.isArray(n[0])?n.shift():[],a=n[0];k[i]||(k[i]=e.Promise.resolve().then((()=>e.Promise.all(o.map(P)).then((e=>a.apply(t,e))))))}function N(t){return new e.Promise((e=>{j([t],(function(t){return e(t)}))}))}Object.defineProperty(t,"sndefine",{value:I}),Object.defineProperty(t,"arequire",{value:N}),k.global=e.Promise.resolve().then((()=>{const t=["fetch","FormData","setInterval","setTimeout","clearInterval","clearTimeout"];return new e.Proxy({},{get(r,n){let i=e[n];return t.includes(n)&&(i=i.bind(e)),i}})})),k["core-sleeknote"]=e.Promise.resolve().then((()=>{t.dev||(t.dev=Object.create(null));let r=Object.fromEntries(l.entries());var n={isSubscribedFromQuery:"true"==r.SNSubscribed||"drip"==r.utm_source&&"email"==r.utm_medium,debug:r.sndebug||r.sleeknote_debug&&"1"||"",reset:r.snreset,editor:r.sneditor,preview:r.snpreview,timestamp:"?"+(Number("1710180907056")||""),getBase:()=>i+s,local:i.includes("local."),custom(e,t){var r=n.CustomInitSettings[e];return r||t},hasCustomProp:e=>e in n.CustomInitSettings,expose:(e,r)=>(t.dev[r]=e,e),hooks:{},eventName:"eve"+ +new Date,needBadge:!1,getDomainLimits:function(){return n.DomainLimits},namespaces:new e.Set,CustomInitSettings:{},DomainLimits:{},SleekNotes:[],getCampaignName:f};return n.preview&&(n.mergeId=void 0===r.snmergeid?0:r.snmergeid),n}))}let h,g=t.arequire("package-core-boot"),{promises:v}=e,w=!1;v.push(new e.Promise((function(e){h=e}))),e.Promise.allSettled(v.slice(0,-1)).then((function(){g.then((async function(r){await async function({launcher:r,coreConfig:o,emit:a,API:c,CONST:d,storage:m,B:p,siteData:f},h){let g=l.get("sncampid"),v=1==l.get("snrules");function S(e){if("outofstock"==e.SleeknoteType)return e}function b(e){e=e.map((e=>{if(w=w||S(e),e.NS=u,!g||e.CampaignId==g)return v&&(e.rules&&e.rules.groups.forEach((function(e){e.conditions=[]})),delete e.targeting),e})).filter((e=>e)),o.SleekNotes.splice(0,0,...e)}o.namespaces.add(u),o.needBadge=!1;let k=Array.isArray(t[u])?t[u].pop():t[u];if(k){if("SleekNote"!=u)try{let e=k.DripAccountId,r=t._dcfg.account_uid;if(e&&r!=e)return console.error(`Drip Account ID's mismatch - _dcfg:${r}, init:${e}. Campaigns in ${n} ignored.`),void h()}catch(e){}for(let[e,t]of Object.entries(k))if("SleekNotes"==e)l.has("snpreview")||b(t);else if("HideSleeknoteBadge"==e){if("SleekNote"==u&&!l.has("snpreview")){let e=t;void 0===t&&(e=!0),!e&&k.CustomerId>=790&&(o.needBadge=!0)}}else"object"==typeof t&&t?(o[e]||(o[e]={}),Object.assign(o[e],t)):void 0!==t&&(o[e]=t)}await m.postCreate(),(o.local||o.reset)&&"n"!=o.reset&&await m.forceResetSession(o.reset);o.preview&&await e.Promise.all([import(i+s+"preview-utils.js"),import(i+s+"preview-toolbar.js")]).then((async function(e){let[{default:t},{default:r}]=e,n=await t.fetchHTMLConfig(o.preview);b(n),p.is.desktop&&r(n[0],o)}));t[u]&&!t[u].API&&(t[u].API=Promise.resolve(c),t[u].triggerOnClick=t[u].triggerOnclick=(...e)=>t[u].API.then((t=>t.call(t,"launch",...e))));f.initialize(),await r.add(o.SleekNotes);let y=await t.arequire("package-tracker");e.trackPageView||y.trackPageView(u)&&(e.trackPageView=!0);await a(d.CORE.EVENTS.LOAD,{NS:u,command:function(){try{return c.apply(null,arguments)}catch(e){console.warn("Error calling API",e)}}}),h()}(r,h),w&&t.arequire("oos-module").then((e=>{e(u,w)}))}))})),function(){try{return t.location!==t.parent.location}catch(e){}}()&&t.parent.postMessage(t.JSON.stringify({fingerprint:"SleekNote",command:"core-loaded"}),"*")}).call(this);